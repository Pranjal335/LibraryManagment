using System;
using System.Collections.Generic;
using System.Text;

namespace LibraryManagment
{
    internal class Students
    {
        public void stu()

        {

            Console.WriteLine();
            Console.WriteLine("Hello You Have Just Entered In Student Portal");
            Console.WriteLine("Press 1 to BorrowBook");
            Console.WriteLine("Press 2 to ReturnBook");
            Console.WriteLine("Press 3 to View Available Books");
        
            Console.WriteLine();
            int x = Convert.ToInt32(Console.ReadLine());

            Addition t = new Addition();

            StudentBook obj = new StudentBook();

            if (x == 1)
            {
                obj.BorrowOperation();
                stu();
            }
            else if (x == 2)
            {
                obj.ReturnOperation();
                stu();
            }
            else if (x == 3)
            {
                foreach (Book b in t)
                {
                    Console.WriteLine($"Book ID-{b.ID}  Book Name-{b.Name}");
                }
                stu();

            }
       


        }

        public void BorrowOperation()
        {


            Console.WriteLine("Press 1 to Borrow");
            Console.WriteLine("Press 2 to Exit");
            Console.WriteLine();

            int val = int.Parse(Console.ReadLine());

            if (val == 1)
            {
                StuBorrow.BorrowBook();
            }
            else if (val == 2)
            {
                stu();
            }

            else
            {
                Console.WriteLine("Invalid option ");
            }

        }

        public void ReturnOperation()
        {
            Console.WriteLine("Press 1 to Return");
            Console.WriteLine("Press 2 to Exit");
            Console.WriteLine();

            int value = int.Parse(Console.ReadLine());

            if (value == 1)
            {
                StuBorrow.ReturnBook();
            }
            else if (value == 2)
            {
                stu();
            }
            else
            {
                Console.WriteLine("Invalid option");
            }
        }
            public static void BorrowBook()
            {
                Addition t = new Addition();
                Console.Write("Enter Book Code ");
                int borrow = Convert.ToInt32(Console.ReadLine());
                Console.WriteLine();
                foreach (Book b in t)
                {
                    if (b.ID.Equals(borrow))
                    {
                        if (b.IsBorrowed == true)
                        {
                            Console.WriteLine("Already Issued");

                            Console.WriteLine();
                        }
                        else
                        {
                            Console.WriteLine(b.ID + ":" + b.Name);
                            Console.WriteLine("Successfully Issued");
                            b.IsBorrowed = true;
                            Console.WriteLine();

                        }
                    }

                }

            }

            public static void ReturnBook()
            {
                Addition t = new Addition();
                Console.Write("Enter Book Code To Return");
string returing=Console.ReadLine()

                int r = int.Parse(returing);
                Console.WriteLine();
                foreach (Book b in t)
                {
                    if (b.ID.Equals(returning))
                    {
                        if (b.IsBorrowed == true)
                        {
                            b.IsBorrowed = false;

                            Console.WriteLine("Book returned");
                            Console.WriteLine();
                            break;
                        }
                        else
                        {
                            Console.WriteLine("this book is not borrowed");
                            Console.WriteLine();

                        }
                    }

                }
            }
        }
    }



